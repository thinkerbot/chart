Chart.fetch = function () {
  d3.csv(Chart.fetch_url).row(function(row) {
    row.x = Chart.casters.x(row.x);
    row.y = Chart.casters.y(row.y);
    row.z = Chart.casters.z(row.z);
    return row;
  }).get(function(error, rows) {
    if (typeof rows == 'undefined') {
      alert(error.statusText);
    } else if (rows.length == 0) {
      Chart.no_more_data();
    } else {
      Chart.rows = Chart.rows.concat(rows);
      Chart.render();
    };
  });
};

Chart.fetch();
